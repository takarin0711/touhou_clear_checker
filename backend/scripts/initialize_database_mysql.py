#!/usr/bin/env python3
"""
MySQLå¯¾å¿œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€æ‹¬åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
æ±æ–¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢çŠ¶æ³ãƒã‚§ãƒƒã‚«ãƒ¼ç”¨

Usage:
    python scripts/initialize_database_mysql.py [options]
    
Options:
    --fresh: æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã—ã¦æ–°è¦ä½œæˆï¼ˆadminãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚‚è‡ªå‹•ä½œæˆï¼‰
    --games-only: ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿½åŠ 
    --characters-only: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿½åŠ 
    --admin-only: adminãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä½œæˆ
    --verify: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ã‚’ç¢ºèª
"""
import os
import sys
import argparse
from datetime import datetime
from pathlib import Path
from typing import List, Tuple

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’ãƒ‘ã‚¹ã«è¿½åŠ 
sys.path.append(str(Path(__file__).parent.parent))

from sqlalchemy import create_engine, text
from sqlalchemy.orm import sessionmaker
from infrastructure.database.connection import DATABASE_URL
from infrastructure.database.models.user_model import UserModel
from infrastructure.database.models.game_model import GameModel
from infrastructure.database.models.game_character_model import GameCharacterModel
from infrastructure.database.models.clear_record_model import ClearRecordModel
from infrastructure.database.models.game_memo_model import GameMemoModel
from infrastructure.database.connection import Base
from infrastructure.security.password_hasher import PasswordHasher
from infrastructure.security.token_generator import TokenGenerator


class MySQLDatabaseInitializer:
    """MySQLå¯¾å¿œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self):
        print(f"ğŸ“¡ æ¥ç¶šå…ˆ: {DATABASE_URL}")
        self.engine = create_engine(DATABASE_URL)
        self.SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=self.engine)
        
    def create_tables(self):
        """ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"""
        print("ğŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆä¸­...")
        Base.metadata.create_all(bind=self.engine)
        print("âœ… å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†")
        
    def drop_tables(self):
        """ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤"""
        print("ğŸ—‘ï¸ æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ä¸­...")
        Base.metadata.drop_all(bind=self.engine)
        print("âœ… å…¨ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤å®Œäº†")
        
    def insert_game_data(self):
        """ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æŠ•å…¥"""
        print("ğŸ® ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ä¸­...")
        
        games_data = [
            ('æ±æ–¹ç´…é­”éƒ·', 6.0, 2002, 'main_series'),
            ('æ±æ–¹å¦–ã€…å¤¢', 7.0, 2003, 'main_series'),
            ('æ±æ–¹æ°¸å¤œæŠ„', 8.0, 2004, 'main_series'),
            ('æ±æ–¹èŠ±æ˜ å¡š', 9.0, 2005, 'versus'),
            ('æ±æ–¹é¢¨ç¥éŒ²', 10.0, 2007, 'main_series'),
            ('æ±æ–¹åœ°éœŠæ®¿', 11.0, 2008, 'main_series'),
            ('æ±æ–¹æ˜Ÿè“®èˆ¹', 12.0, 2009, 'main_series'),
            ('å¦–ç²¾å¤§æˆ¦äº‰', 12.8, 2010, 'spin_off_stg'),
            ('æ±æ–¹ç¥éœŠå»Ÿ', 13.0, 2011, 'main_series'),
            ('æ±æ–¹è¼é‡åŸ', 14.0, 2013, 'main_series'),
            ('æ±æ–¹ç´ºç ä¼', 15.0, 2015, 'main_series'),
            ('æ±æ–¹å¤©ç©ºç’‹', 16.0, 2017, 'main_series'),
            ('æ±æ–¹é¬¼å½¢ç£', 17.0, 2019, 'main_series'),
            ('æ±æ–¹è™¹é¾æ´', 18.0, 2021, 'main_series'),
            ('æ±æ–¹ç£ç‹åœ’', 19.0, 2023, 'versus'),
            ('æ±æ–¹éŒ¦ä¸Šäº¬', 20.0, 2025, 'main_series')
        ]
        
        with self.SessionLocal() as session:
            for index, (title, series_number, release_year, game_type) in enumerate(games_data, 1):
                # IDã‚’1ã‹ã‚‰é †ç•ªã«æŒ¯ã‚‹
                actual_id = index
                
                game = GameModel(
                    id=actual_id, 
                    title=title,
                    series_number=series_number,
                    release_year=release_year,
                    game_type=game_type
                )
                session.merge(game)  # æ—¢å­˜ã®å ´åˆã¯æ›´æ–°
            session.commit()
            
        print(f"âœ… {len(games_data)}ä½œå“ã®ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†")
        
    def insert_character_data(self):
        """ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æŠ•å…¥"""
        print("ğŸ‘¥ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ä¸­...")
        
        # SQLiteã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰æ­£ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        characters_data = self._get_all_characters_data()
        
        with self.SessionLocal() as session:
            for game_id, character_name, description, sort_order in characters_data:
                character = GameCharacterModel(
                    game_id=game_id,
                    character_name=character_name,
                    description=description,
                    sort_order=sort_order
                )
                session.merge(character)  # æ—¢å­˜ã®å ´åˆã¯æ›´æ–°
            session.commit()
            
        print(f"âœ… {len(characters_data)}ç¨®é¡ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†")
    
    def _get_all_characters_data(self):
        """SQLiteã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨å®Œå…¨ã«åŒã˜ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™"""
        characters = []
        
        # æ±æ–¹ç´…é­”éƒ·ï¼ˆ1ä½œç›® -> game_id=1ï¼‰
        characters.extend([
            (1, 'éœŠå¤¢Aï¼ˆéœŠã®å¾¡æœ­ï¼‰', 'ãƒ›ãƒ¼ãƒŸãƒ³ã‚°ã‚¢ãƒŸãƒ¥ãƒ¬ãƒƒãƒˆãƒ»éœŠåŠ›é‡è¦–ã‚¿ã‚¤ãƒ—', 1),
            (1, 'éœŠå¤¢Bï¼ˆå¤¢ã®å¾¡æœ­ï¼‰', 'ãƒ‘ã‚¹ã‚¦ã‚§ã‚¤ã‚¸ãƒ§ãƒ³ãƒ‹ãƒ¼ãƒ‰ãƒ«ãƒ»æ”»æ’ƒåŠ›é‡è¦–ã‚¿ã‚¤ãƒ—', 2),
            (1, 'é­”ç†æ²™Aï¼ˆé­”ã®å¾¡æœ­ï¼‰', 'ãƒã‚¸ãƒƒã‚¯ãƒŸã‚µã‚¤ãƒ«ãƒ»é­”åŠ›é‡è¦–ã‚¿ã‚¤ãƒ—', 3),
            (1, 'é­”ç†æ²™Bï¼ˆæ‹ã®å¾¡æœ­ï¼‰', 'ã‚¤ãƒªãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³ãƒ¬ãƒ¼ã‚¶ãƒ¼ãƒ»è²«é€šåŠ›é‡è¦–ã‚¿ã‚¤ãƒ—', 4),
        ])
        
        # æ±æ–¹å¦–ã€…å¤¢ï¼ˆ2ä½œç›® -> game_id=2ï¼‰
        characters.extend([
            (2, 'éœŠå¤¢Aï¼ˆéœŠç¬¦ï¼‰', 'ãƒ›ãƒ¼ãƒŸãƒ³ã‚°ãƒ»èª˜å°å‹', 1),
            (2, 'éœŠå¤¢Bï¼ˆå¤¢ç¬¦ï¼‰', 'é€£å°„å‹', 2),
            (2, 'é­”ç†æ²™Aï¼ˆé­”ç¬¦ï¼‰', 'ãƒ‘ãƒ¯ãƒ¼é‡è¦–å‹', 3),
            (2, 'é­”ç†æ²™Bï¼ˆæ‹ç¬¦ï¼‰', 'è²«é€šãƒ¬ãƒ¼ã‚¶ãƒ¼å‹', 4),
            (2, 'å’²å¤œAï¼ˆå¹»ç¬¦ï¼‰', 'åºƒç¯„å›²å‹', 5),
            (2, 'å’²å¤œBï¼ˆæ™‚ç¬¦ï¼‰', 'ç‰¹æ®Šå‹', 6),
        ])
        
        # æ±æ–¹æ°¸å¤œæŠ„ï¼ˆ3ä½œç›® -> game_id=3ï¼‰
        characters.extend([
            (3, 'éœŠå¤¢&ç´«ï¼ˆäººå¦–ã‚¿ãƒƒã‚°ï¼‰', 'å¹»æƒ³ã®çµç•Œçµ„', 1),
            (3, 'é­”ç†æ²™&ã‚¢ãƒªã‚¹ï¼ˆäººå¦–ã‚¿ãƒƒã‚°ï¼‰', 'ç¦å‘ªã®è© å”±çµ„', 2),
            (3, 'å’²å¤œ&ãƒ¬ãƒŸãƒªã‚¢ï¼ˆäººå¦–ã‚¿ãƒƒã‚°ï¼‰', 'å¤¢å¹»ã®ç´…é­”çµ„', 3),
            (3, 'å¦–å¤¢&å¹½ã€…å­ï¼ˆäººå¦–ã‚¿ãƒƒã‚°ï¼‰', 'å¹½å†¥ã®ä½äººçµ„', 4),
            (3, 'éœŠå¤¢ï¼ˆäººé–“å˜ä½“ï¼‰', 'éœŠåŠ›å˜ä½“æ”»æ’ƒ', 5),
            (3, 'é­”ç†æ²™ï¼ˆäººé–“å˜ä½“ï¼‰', 'é­”æ³•å˜ä½“æ”»æ’ƒ', 6),
            (3, 'å’²å¤œï¼ˆäººé–“å˜ä½“ï¼‰', 'æ™‚é–“æ“ä½œå˜ä½“æ”»æ’ƒ', 7),
            (3, 'å¦–å¤¢ï¼ˆäººé–“å˜ä½“ï¼‰', 'åŠéœŠå˜ä½“æ”»æ’ƒ', 8),
            (3, 'ç´«ï¼ˆå¦–æ€ªå˜ä½“ï¼‰', 'å¢ƒç•Œæ“ä½œå˜ä½“æ”»æ’ƒ', 9),
            (3, 'ã‚¢ãƒªã‚¹ï¼ˆå¦–æ€ªå˜ä½“ï¼‰', 'äººå½¢æ“ä½œå˜ä½“æ”»æ’ƒ', 10),
            (3, 'ãƒ¬ãƒŸãƒªã‚¢ï¼ˆå¦–æ€ªå˜ä½“ï¼‰', 'å¸è¡€å˜ä½“æ”»æ’ƒ', 11),
            (3, 'å¹½ã€…å­ï¼ˆå¦–æ€ªå˜ä½“ï¼‰', 'æ­»éœŠå˜ä½“æ”»æ’ƒ', 12),
        ])
        
        # æ±æ–¹èŠ±æ˜ å¡šï¼ˆ4ä½œç›® -> game_id=4ï¼‰- å¯¾æˆ¦å‹STG
        characters.extend([
            (4, 'éœŠå¤¢', 'ãƒãƒ£ãƒ¼ã‚¸é€Ÿåº¦â˜…â˜…â˜…â˜…â˜…ãƒ»å½“ãŸã‚Šåˆ¤å®šå°', 1),
            (4, 'é­”ç†æ²™', 'ç§»å‹•é€Ÿåº¦â˜…â˜…â˜…â˜…â˜…ãƒ»ãƒãƒ£ãƒ¼ã‚¸é€Ÿåº¦â˜…â˜…', 2),
            (4, 'å’²å¤œ', 'æ™‚é–“æ“ä½œç³»ç‰¹æ®Šèƒ½åŠ›', 3),
            (4, 'å¦–å¤¢', 'åŠéœŠã‚’æ´»ç”¨ã—ãŸç‰¹æ®Šæ”»æ’ƒ', 4),
            (4, 'éˆ´ä»™', 'ç‹‚æ°—ã«ã‚ˆã‚‹ç‰¹æ®ŠåŠ¹æœ', 5),
            (4, 'ãƒãƒ«ãƒ', 'æ°·çµç³»æ”»æ’ƒ', 6),
            (4, 'ãƒªãƒªã‚«', 'é¨’éœŠã«ã‚ˆã‚‹éŸ³éŸ¿æ”»æ’ƒ', 7),
            (4, 'ãƒ¡ãƒ«ãƒ©ãƒ³', 'å¹»æƒ³ã®æ¼”å¥', 8),
            (4, 'ãƒ«ãƒŠã‚µ', 'æ†‚é¬±ãªéŸ³è‰²', 9),
            (4, 'ãƒŸã‚¹ãƒ†ã‚£ã‚¢', 'å¤œé›€ã®æ­Œå£°', 10),
            (4, 'ã¦ã‚', 'ãƒ©ãƒƒã‚­ãƒ¼åŠ¹æœ', 11),
            (4, 'æ–‡', 'é¢¨ã®åŠ›ã¨å–æ', 12),
            (4, 'ãƒ¡ãƒ‡ã‚£ã‚¹ãƒ³', 'æ¯’ã«ã‚ˆã‚‹æ”»æ’ƒ', 13),
            (4, 'å¹½é¦™', 'èŠ±ã¨è‡ªç„¶ã®åŠ›', 14),
            (4, 'å°ç”º', 'è·é›¢æ“ä½œèƒ½åŠ›', 15),
            (4, 'æ˜ å§«', 'å¯©åˆ¤ã®åŠ›', 16),
        ])
        
        # æ±æ–¹é¢¨ç¥éŒ²ï¼ˆ5ä½œç›® -> game_id=5ï¼‰
        characters.extend([
            (5, 'éœŠå¤¢Aï¼ˆèª˜å°è£…å‚™ï¼‰', 'ãƒ›ãƒ¼ãƒŸãƒ³ã‚°å¼¾ãƒ»é“ä¸­æ¥½ãƒ»éœŠæ’ƒç¯„å›²å¤§', 1),
            (5, 'éœŠå¤¢Bï¼ˆå‰æ–¹é›†ä¸­è£…å‚™ï¼‰', 'é«˜ç«åŠ›æ­£é¢é›†ä¸­ãƒ»é è·é›¢æœ€å„ªç§€ç«åŠ›', 2),
            (5, 'éœŠå¤¢Cï¼ˆå°å°è£…å‚™ï¼‰', 'è¿‘è·é›¢ç‰¹åŒ–ãƒ»é“ä¸­å¼·åŒ–ãƒ»ãƒœã‚¹æˆ¦è¦å¼µã‚Šä»˜ã‘', 3),
            (5, 'é­”ç†æ²™Aï¼ˆé«˜å¨åŠ›è£…å‚™ï¼‰', 'ä¸­ãƒ‘ãƒ¯ãƒ¼é è·é›¢ç«åŠ›ç‰¹åŒ–ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç™–ã‚ã‚Š', 4),
            (5, 'é­”ç†æ²™Bï¼ˆè²«é€šè£…å‚™ï¼‰', 'ãƒã‚°ãƒãƒªãƒ»ç‰¹å®šæ¡ä»¶ä¸‹ã§åœ§å€’çš„ç«åŠ›', 5),
            (5, 'é­”ç†æ²™Cï¼ˆé­”æ³•ä½¿ã„è£…å‚™ï¼‰', 'ã‚ªãƒ—ã‚·ãƒ§ãƒ³å›ºå®šå¯èƒ½ãƒ»æˆ¦ç•¥æ€§é«˜', 6),
        ])
        
        # æ±æ–¹åœ°éœŠæ®¿ï¼ˆ6ä½œç›® -> game_id=6ï¼‰
        characters.extend([
            (6, 'éœŠå¤¢Aï¼ˆç´«æ”¯æ´ï¼‰', 'å‰æ–¹é›†ä¸­é«˜ç«åŠ›ãƒ»å½“ãŸã‚Šåˆ¤å®šæ¥µå°', 1),
            (6, 'éœŠå¤¢Bï¼ˆèƒé¦™æ”¯æ´ï¼‰', 'é«˜é€Ÿç§»å‹•æ™‚ç«åŠ›é‡è¦–', 2),
            (6, 'éœŠå¤¢Cï¼ˆæ–‡æ”¯æ´ï¼‰', 'éœŠæ’ƒç„¡æ•µæ™‚é–“æœ€é•·ãƒ»è¿½å°¾éœŠæ’ƒ', 3),
            (6, 'é­”ç†æ²™Aï¼ˆã‚¢ãƒªã‚¹æ”¯æ´ï¼‰', 'äººå½¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ»ãƒ‘ãƒ¯ãƒ¼8.0ã¾ã§ä¸Šæ˜‡', 4),
            (6, 'é­”ç†æ²™Bï¼ˆãƒ‘ãƒãƒ¥ãƒªãƒ¼æ”¯æ´ï¼‰', '5å…ƒç´ åˆ‡æ›¿ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç«æ°´æœ¨é‡‘åœŸç¬¦ï¼‰', 5),
            (6, 'é­”ç†æ²™Cï¼ˆã«ã¨ã‚Šæ”¯æ´ï¼‰', 'éœŠæ’ƒãƒãƒªã‚¢ãƒ»ãƒ‘ãƒ¯ãƒ¼å›å¾©ã‚·ã‚¹ãƒ†ãƒ ', 6),
        ])
        
        # æ±æ–¹æ˜Ÿè“®èˆ¹ï¼ˆ7ä½œç›® -> game_id=7ï¼‰
        characters.extend([
            (7, 'éœŠå¤¢Aï¼ˆä¸€ç‚¹é›†ä¸­æ”»æ’ƒåŠ›é‡è¦–å‹ï¼‰', 'é‡å¼¾ãƒ›ãƒ¼ãƒŸãƒ³ã‚°å‹ãƒ»å®‰å®šæ€§é‡è¦–', 1),
            (7, 'éœŠå¤¢Bï¼ˆã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³é‡è¦–è¶…èª˜å°å‹ï¼‰', 'é™°é™½ç‰ç›´ç·šå‹ãƒ»ç«åŠ›é‡è¦–', 2),
            (7, 'é­”ç†æ²™Aï¼ˆç„¡é™è²«é€šï¼†å¸¸æ™‚æ”»æ’ƒå‹ï¼‰', 'æ˜Ÿå‹å¼¾å¹•ãƒ»å‰æ–¹é›†ä¸­å‹', 3),
            (7, 'é­”ç†æ²™Bï¼ˆè¶…æ”»æ’ƒç¯„å›²é‡è¦–å‹ï¼‰', 'ãƒ¬ãƒ¼ã‚¶ãƒ¼ç³»ãƒ»è²«é€šç‰¹åŒ–', 4),
            (7, 'æ—©è‹—Aï¼ˆä¸€ç‚¹é›†ä¸­ï¼†èª˜å°å‹ï¼‰', 'ã‚µãƒ–ã‚·ãƒ§ãƒƒãƒˆç›´è§’èª˜å°ãƒ»å…¨ç”»é¢ã‚¹ãƒšãƒ«', 5),
            (7, 'æ—©è‹—Bï¼ˆé«˜å¨åŠ›ï¼†åºƒç¯„å›²ç‚¸è£‚å‹ï¼‰', 'çˆ†ç™ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ»è¿‘è·é›¢æœ€å¼·ç«åŠ›', 6),
        ])
        
        # å¦–ç²¾å¤§æˆ¦äº‰ï¼ˆ8ä½œç›® -> game_id=8ï¼‰
        characters.extend([
            (8, 'ãƒãƒ«ãƒï¼ˆRoute A1ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 1),
            (8, 'ãƒãƒ«ãƒï¼ˆRoute A2ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 2),
            (8, 'ãƒãƒ«ãƒï¼ˆRoute B1ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 3),
            (8, 'ãƒãƒ«ãƒï¼ˆRoute B2ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 4),
            (8, 'ãƒãƒ«ãƒï¼ˆRoute C1ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 5),
            (8, 'ãƒãƒ«ãƒï¼ˆRoute C2ï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 6),
            (8, 'ãƒãƒ«ãƒï¼ˆExtraï¼‰', 'ã‚¢ã‚¤ã‚¹ãƒãƒªã‚¢ãƒ»ãƒ•ãƒªãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½ãƒ»ãƒ‘ãƒ¯ãƒ¼Lv.1-15â†’MAX', 7),
        ])
        
        # æ±æ–¹ç¥éœŠå»Ÿï¼ˆ9ä½œç›® -> game_id=9ï¼‰
        characters.extend([
            (9, 'éœŠå¤¢', 'åºƒç¯„å›²ãƒ›ãƒ¼ãƒŸãƒ³ã‚°å¼¾ãƒ»éœŠåé›†å„ªç§€ãƒ»åˆå¿ƒè€…å‘ã‘', 1),
            (9, 'é­”ç†æ²™', 'ç™–ã®ã‚ã‚‹ã‚·ãƒ§ãƒƒãƒˆç¯„å›²ãƒ»é«˜ã„ãƒˆãƒ©ãƒ³ã‚¹æ”»æ’ƒåŠ›', 2),
            (9, 'æ—©è‹—', 'å¹…åºƒã„ã‚·ãƒ§ãƒƒãƒˆç¯„å›²ãƒ»ãƒ©ã‚¤ãƒ•ãƒœãƒ ç²å¾—ã—ã‚„ã™ã„', 3),
            (9, 'å¦–å¤¢', 'æºœã‚æ’ƒã¡åºƒç¯„å›²è²«é€šé«˜ç«åŠ›æ–¬æ’ƒãƒ»é«˜é›£æ˜“åº¦å‘ã‘', 4),
        ])
        
        # æ±æ–¹è¼é‡åŸï¼ˆ10ä½œç›® -> game_id=10ï¼‰
        characters.extend([
            (10, 'éœŠå¤¢Aï¼ˆãŠç¥“ã„æ£’ï¼‰', 'ã‚µãƒ–ã‚·ãƒ§ãƒƒãƒˆé »ç¹é…ç½®ãƒ»é­”ç†æ²™ç ²æˆ¦è¡“', 1),
            (10, 'éœŠå¤¢B (å¦–å™¨ãªã—)', 'å¾“æ¥å‹ãƒ›ãƒ¼ãƒŸãƒ³ã‚°ãƒ»é‡æ”»æ’ƒ', 2),
            (10, 'é­”ç†æ²™Aï¼ˆãƒŸãƒ‹å…«å¦è·¯ï¼‰', 'é è·é›¢ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸‹ä½ãƒ»ãƒœãƒ ã®ã¿ãŒå–ã‚ŠæŸ„', 3),
            (10, 'é­”ç†æ²™Bï¼ˆå¦–å™¨ãªã—ï¼‰', 'æ¥µã‚ã¦å¼·åŠ›ãƒ»æœ€å¼·ãƒ•ã‚¡ãƒ¼ãƒŸãƒ³ã‚°æ€§èƒ½ãƒ»é˜²å¾¡è„†å¼±', 4),
            (10, 'å’²å¤œAï¼ˆã‚·ãƒ«ãƒãƒ¼ãƒ–ãƒ¬ãƒ¼ãƒ‰ï¼‰', 'ãƒãƒªã‚¢ãƒœãƒ ãƒ»å„ªç§€ãªãƒ•ã‚¡ãƒ¼ãƒŸãƒ³ã‚°ãƒ»é˜²å¾¡æ€§èƒ½', 5),
            (10, 'å’²å¤œBï¼ˆå¦–å™¨ãªã—ï¼‰', 'å’²å¤œAã«åŠ£ã‚‹æ€§èƒ½', 6),
        ])
        
        # æ±æ–¹ç´ºç ä¼ï¼ˆ11ä½œç›® -> game_id=11ï¼‰
        characters.extend([
            (11, 'éœŠå¤¢', 'ãƒ›ãƒ¼ãƒŸãƒ³ã‚°ã‚·ãƒ§ãƒƒãƒˆãƒ»ã‚„ã‚„å°ã•ã„å½“ãŸã‚Šåˆ¤å®š', 1),
            (11, 'é­”ç†æ²™', 'ä½é€Ÿãƒ»é«˜é€Ÿå…±ã«é«˜ç«åŠ›ãƒ»ç‹­ã„æ”»æ’ƒç¯„å›²', 2),
            (11, 'æ—©è‹—', 'ä½é€Ÿãƒ»é«˜é€Ÿå…±ã«åºƒç¯„å›²æ”»æ’ƒãƒ»é›†ä¸­ã‚·ãƒ§ãƒƒãƒˆãƒ›ãƒ¼ãƒŸãƒ³ã‚°', 3),
            (11, 'éˆ´ä»™', 'é›†ä¸­ã‚·ãƒ§ãƒƒãƒˆè²«é€šå¼¾ãƒ»ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰3ç™ºè€ä¹…ãƒãƒªã‚¢ãƒ»Legacyç‰¹åŒ–', 4),
        ])
        
        # æ±æ–¹å¤©ç©ºç’‹ï¼ˆ12ä½œç›® -> game_id=12ï¼‰
        characters.extend([
            (12, 'éœŠå¤¢ï¼ˆæ˜¥ï¼‰', 'å¼±ã„ãƒ›ãƒ¼ãƒŸãƒ³ã‚°ã‚·ãƒ§ãƒƒãƒˆãƒ»é•·ã„ç„¡æ•µæ™‚é–“', 1),
            (12, 'éœŠå¤¢ï¼ˆå¤ï¼‰', 'ä½ã‚²ãƒ¼ã‚¸æ¶ˆè²»ãƒ»ç›´æ¥ãƒ€ãƒ¡ãƒ¼ã‚¸', 2),
            (12, 'éœŠå¤¢ï¼ˆç§‹ï¼‰', 'é«˜ã‚·ãƒ§ãƒƒãƒˆå¨åŠ›ãƒ»ç‹¬ç‰¹ãªç§»å‹•æ€§èƒ½', 3),
            (12, 'éœŠå¤¢ï¼ˆå†¬ï¼‰', 'ãƒ¬ãƒ¼ã‚¶ãƒ¼å€åŠ ãƒã‚°ã§é«˜ãƒ€ãƒ¡ãƒ¼ã‚¸å¯èƒ½', 4),
            (12, 'ãƒãƒ«ãƒï¼ˆæ˜¥ï¼‰', 'æ°·å¼¾ç³»æ”»æ’ƒãƒ»ä½é€Ÿåº¦ãƒ»é«˜è€ä¹…', 5),
            (12, 'ãƒãƒ«ãƒï¼ˆå¤ï¼‰', 'æ°·å¼¾ç³»æ”»æ’ƒãƒ»ä½é€Ÿåº¦ãƒ»é«˜è€ä¹…', 6),
            (12, 'ãƒãƒ«ãƒï¼ˆç§‹ï¼‰', 'æ°·å¼¾ç³»æ”»æ’ƒãƒ»ä½é€Ÿåº¦ãƒ»é«˜è€ä¹…', 7),
            (12, 'ãƒãƒ«ãƒï¼ˆå†¬ï¼‰', 'æ°·å¼¾ç³»æ”»æ’ƒãƒ»ä½é€Ÿåº¦ãƒ»é«˜è€ä¹…', 8),
            (12, 'æ–‡ï¼ˆæ˜¥ï¼‰', 'é«˜é€Ÿç§»å‹•ãƒ»é¢¨ç³»æ”»æ’ƒ', 9),
            (12, 'æ–‡ï¼ˆå¤ï¼‰', 'é«˜é€Ÿç§»å‹•ãƒ»é¢¨ç³»æ”»æ’ƒ', 10),
            (12, 'æ–‡ï¼ˆç§‹ï¼‰', 'é«˜é€Ÿç§»å‹•ãƒ»é¢¨ç³»æ”»æ’ƒ', 11),
            (12, 'æ–‡ï¼ˆå†¬ï¼‰', 'é«˜é€Ÿç§»å‹•ãƒ»é¢¨ç³»æ”»æ’ƒ', 12),
            (12, 'é­”ç†æ²™ï¼ˆæ˜¥ï¼‰', 'é›†ä¸­å‰æ–¹ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒœã‚¹æˆ¦ç‰¹åŒ–', 13),
            (12, 'é­”ç†æ²™ï¼ˆå¤ï¼‰', 'é›†ä¸­å‰æ–¹ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒœã‚¹æˆ¦ç‰¹åŒ–', 14),
            (12, 'é­”ç†æ²™ï¼ˆç§‹ï¼‰', 'é›†ä¸­å‰æ–¹ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒœã‚¹æˆ¦ç‰¹åŒ–', 15),
            (12, 'é­”ç†æ²™ï¼ˆå†¬ï¼‰', 'é›†ä¸­å‰æ–¹ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒœã‚¹æˆ¦ç‰¹åŒ–', 16),
        ])
        
        # æ±æ–¹é¬¼å½¢ç£ï¼ˆ13ä½œç›® -> game_id=13ï¼‰
        characters.extend([
            (13, 'éœŠå¤¢ï¼ˆã‚ªã‚ªã‚«ãƒŸï¼‰', 'é›†ä¸­ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 1),
            (13, 'éœŠå¤¢ï¼ˆã‚«ãƒ¯ã‚¦ã‚½ï¼‰', 'ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰å¼·åŒ–ãƒ»åˆæœŸæ•°+1ãƒ»3å€‹ä»¥ä¸Šã§ãƒãƒªã‚¢', 2),
            (13, 'éœŠå¤¢ï¼ˆã‚ªã‚ªãƒ¯ã‚·ï¼‰', 'æ‹¡æ•£ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 3),
            (13, 'é­”ç†æ²™ï¼ˆã‚ªã‚ªã‚«ãƒŸï¼‰', 'é›†ä¸­ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 4),
            (13, 'é­”ç†æ²™ï¼ˆã‚«ãƒ¯ã‚¦ã‚½ï¼‰', 'ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰å¼·åŒ–ãƒ»åˆæœŸæ•°+1ãƒ»3å€‹ä»¥ä¸Šã§ãƒãƒªã‚¢', 5),
            (13, 'é­”ç†æ²™ï¼ˆã‚ªã‚ªãƒ¯ã‚·ï¼‰', 'æ‹¡æ•£ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 6),
            (13, 'æ—©è‹—ï¼ˆã‚ªã‚ªã‚«ãƒŸï¼‰', 'é›†ä¸­ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 7),
            (13, 'æ—©è‹—ï¼ˆã‚«ãƒ¯ã‚¦ã‚½ï¼‰', 'ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰å¼·åŒ–ãƒ»åˆæœŸæ•°+1ãƒ»3å€‹ä»¥ä¸Šã§ãƒãƒªã‚¢', 8),
            (13, 'æ—©è‹—ï¼ˆã‚ªã‚ªãƒ¯ã‚·ï¼‰', 'æ‹¡æ•£ã‚·ãƒ§ãƒƒãƒˆå¼·åŒ–ãƒ»3å€‹ä»¥ä¸Šã§ãƒã‚¤ãƒ‘ãƒ¼åŒ–', 9),
        ])
        
        # æ±æ–¹è™¹é¾æ´ï¼ˆ14ä½œç›® -> game_id=14ï¼‰
        characters.extend([
            (14, 'éœŠå¤¢', 'æœ­ã‚·ã‚¹ãƒ†ãƒ ãƒ»ç¯„å›²æ”»æ’ƒã€å¦–å¦–å¤¢ãƒ©ã‚¤ã‚¯', 1),
            (14, 'é­”ç†æ²™', 'æœ­ã‚·ã‚¹ãƒ†ãƒ ãƒ»è²«é€šæ”»æ’ƒã€é¢¨ç¥éŒ²ãƒ©ã‚¤ã‚¯', 2),
            (14, 'æ—©è‹—', 'æœ­ã‚·ã‚¹ãƒ†ãƒ ãƒ»èª˜å°æ”»æ’ƒã€ç¥éœŠå»Ÿãƒ©ã‚¤ã‚¯', 3),
            (14, 'å¦–å¤¢', 'æœ­ã‚·ã‚¹ãƒ†ãƒ ãƒ»è¿‘è·é›¢æ”»æ’ƒã€è¼é‡åŸãƒ©ã‚¤ã‚¯', 4),
        ])
        
        # æ±æ–¹ç£ç‹åœ’ï¼ˆ15ä½œç›® -> game_id=15ï¼‰
        characters.extend([
            (15, 'éœŠå¤¢', 'èŠ±æ˜ å¡šé¢¨å¯¾æˆ¦STG', 1),
            (15, 'é­”ç†æ²™', 'èŠ±æ˜ å¡šé¢¨å¯¾æˆ¦STG', 2),
            (15, 'æ–‡', 'èŠ±æ˜ å¡šé¢¨å¯¾æˆ¦STG', 3),
            (15, 'å’²å¤œ', 'èŠ±æ˜ å¡šé¢¨å¯¾æˆ¦STG', 4),
        ])
        
        # æ±æ–¹éŒ¦ä¸Šäº¬ï¼ˆ16ä½œç›® -> game_id=16ï¼‰
        characters.extend([
            (16, 'éœŠå¤¢', 'æ–°ä½œãƒ¡ã‚¤ãƒ³æ©Ÿä½“', 1),
            (16, 'é­”ç†æ²™', 'æ–°ä½œãƒ¡ã‚¤ãƒ³æ©Ÿä½“', 2),
            (16, 'æ—©è‹—', 'æ–°ä½œã‚µãƒ–æ©Ÿä½“', 3),
            (16, 'å’²å¤œ', 'æ–°ä½œã‚µãƒ–æ©Ÿä½“', 4),
        ])
        
        return characters
    
    def load_admin_password(self) -> str:
        """secrets/.admin_passwordã‹ã‚‰ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€"""
        # Dockerç’°å¢ƒã¨ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒä¸¡æ–¹ã«å¯¾å¿œ
        password_paths = [
            Path(__file__).parent.parent.parent / "secrets" / ".admin_password",  # ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒ
            Path("/app/secrets/.admin_password"),  # Dockerç’°å¢ƒï¼ˆãƒã‚¦ãƒ³ãƒˆæƒ³å®šï¼‰
            Path("/secrets/.admin_password"),     # Dockerç’°å¢ƒï¼ˆä»£æ›¿ãƒ‘ã‚¹ï¼‰
        ]
        
        password_file = None
        for path in password_paths:
            if path.exists():
                password_file = path
                break
        
        if password_file is None:
            print(f"âš ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ç¢ºèªã—ãŸãƒ‘ã‚¹:")
            for path in password_paths:
                print(f"   - {path}")
            print("   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™: admin123")
            return "admin123"
            
        try:
            password = password_file.read_text().strip()
            if not password:
                print("âš ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚")
                return "admin123"
            print(f"ğŸ” ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã¿å®Œäº†: {password_file}")
            return password
        except Exception as e:
            print(f"âŒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: {e}")
            print("   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™: admin123")
            return "admin123"
    
    def insert_admin_user(self):
        """åˆæœŸadminãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹"""
        print("ğŸ‘‘ adminãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆä¸­...")
        
        with self.SessionLocal() as session:
            # æ—¢å­˜ã®adminãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç¢ºèª
            existing_admin = session.query(UserModel).filter(
                (UserModel.username == "admin") | (UserModel.is_admin == True)
            ).first()
            
            if existing_admin:
                print(f"â„¹ï¸ adminãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™: ID={existing_admin.id}, ãƒ¦ãƒ¼ã‚¶ãƒ¼å={existing_admin.username}, ãƒ¡ãƒ¼ãƒ«={existing_admin.email}, ç®¡ç†è€…={existing_admin.is_admin}")
                return
            
            # adminãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
            username = "admin"
            email = "admin@touhou-clear-checker.com"
            password = self.load_admin_password()
            
            # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
            password_hasher = PasswordHasher()
            hashed_password = password_hasher.hash_password(password)
            
            # èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ
            verification_token = TokenGenerator.generate_verification_token()
            
            # adminãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
            admin_user = UserModel(
                username=username,
                email=email,
                hashed_password=hashed_password,
                is_active=True,
                is_admin=True,
                email_verified=True,  # adminã¯èªè¨¼æ¸ˆã¿ã¨ã™ã‚‹
                verification_token=verification_token
            )
            
            session.add(admin_user)
            session.commit()
            session.refresh(admin_user)
            
            print(f"âœ… adminãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã—ãŸ:")
            print(f"   - ID: {admin_user.id}")
            print(f"   - ãƒ¦ãƒ¼ã‚¶ãƒ¼å: {admin_user.username}")
            print(f"   - ãƒ¡ãƒ¼ãƒ«: {admin_user.email}")
            print(f"   - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: {password}")
            print(f"   - ç®¡ç†è€…æ¨©é™: âœ…")
            print(f"   - èªè¨¼æ¸ˆã¿: âœ…")
        
    def verify_database(self):
        """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ç¢ºèª"""
        print("ğŸ” ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ã‚’ç¢ºèªä¸­...")
        
        with self.SessionLocal() as session:
            # ã‚²ãƒ¼ãƒ æ•°ç¢ºèª
            games = session.query(GameModel).all()
            print("\nğŸ“š ç™»éŒ²æ¸ˆã¿ã‚²ãƒ¼ãƒ :")
            for game in games:
                character_count = session.query(GameCharacterModel).filter(GameCharacterModel.game_id == game.id).count()
                print(f"  {game.id:4.1f}: {game.title} ({character_count}æ©Ÿä½“)")
            
            # çµ±è¨ˆæƒ…å ±
            total_games = len(games)
            total_characters = session.query(GameCharacterModel).count()
            
            print(f"\nğŸ“Š çµ±è¨ˆæƒ…å ±:")
            print(f"  ğŸ® åˆè¨ˆã‚²ãƒ¼ãƒ æ•°: {total_games}ä½œå“")
            print(f"  ğŸ‘¥ åˆè¨ˆæ©Ÿä½“æ•°: {total_characters}ç¨®é¡")
            
            # ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
            tables = session.execute(text("SHOW TABLES")).fetchall()
            table_names = [table[0] for table in tables]
            print(f"\nğŸ—ƒï¸ ä½œæˆæ¸ˆã¿ãƒ†ãƒ¼ãƒ–ãƒ«: {', '.join(table_names)}")
            
    def run_fresh_install(self):
        """å®Œå…¨åˆæœŸåŒ–å®Ÿè¡Œ"""
        print("=== ğŸš€ MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Œå…¨åˆæœŸåŒ–é–‹å§‹ ===")
        self.drop_tables()
        self.create_tables()
        self.insert_game_data()
        self.insert_character_data()
        self.insert_admin_user()  # adminãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã‚’è¿½åŠ 
        self.verify_database()
        print("\nğŸ‰ MySQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–å®Œäº†ï¼")
        print(f"ğŸ“¡ æ¥ç¶šå…ˆ: {DATABASE_URL}")


def main():
    """ãƒ¡ã‚¤ãƒ³é–¢æ•°"""
    parser = argparse.ArgumentParser(description="MySQLå¯¾å¿œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ")
    parser.add_argument("--fresh", action="store_true", help="æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤ã—ã¦æ–°è¦ä½œæˆ")
    parser.add_argument("--games-only", action="store_true", help="ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿½åŠ ")
    parser.add_argument("--characters-only", action="store_true", help="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿½åŠ ")
    parser.add_argument("--admin-only", action="store_true", help="adminãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä½œæˆ")
    parser.add_argument("--verify", action="store_true", help="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…å®¹ã‚’ç¢ºèª")
    
    args = parser.parse_args()
    
    try:
        initializer = MySQLDatabaseInitializer()
        
        if args.fresh:
            initializer.run_fresh_install()
        elif args.games_only:
            initializer.insert_game_data()
        elif args.characters_only:
            initializer.insert_character_data()
        elif args.admin_only:
            initializer.insert_admin_user()
        elif args.verify:
            initializer.verify_database()
        else:
            # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç¢ºèªã®ã¿
            initializer.verify_database()
            
    except Exception as e:
        print(f"âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
        return 1
    
    return 0


if __name__ == "__main__":
    exit(main())