# 既知の問題・制限事項

## 技術的制約

### 1. Python バージョン互換性（解決済み）
**問題**: Python 3.13とFastAPI/Pydantic 1.x系の互換性問題

**詳細**:
```
ValueError: 'not' is not a valid parameter name
```

**解決済み対応**:
- FastAPI 0.117.1, Pydantic 2.11.9にアップグレード
- Python 3.13対応仮想環境（venv313）を作成
- Pydantic V2対応コード修正（schema_extra → json_schema_extra）
- 互換性問題を解決し、Python 3.13で正常動作確認済み

### 2. 日付処理（解決済み）
**問題**: タイムゾーン差による日付の前日表示

**解決済み対応**:
- バックエンド：`datetime`型 → `date`型に変更
- フロントエンド：ISO形式変換を避けて文字列直接処理
- データフォーマット：`YYYY-MM-DD`で統一

### 3. TypeScript移行（完了済み）
**実施内容**: JavaScriptからTypeScriptへの完全移行（2025年1月）

**完了事項**:
- 全.jsファイルを.ts/.tsxに変換
- 37個のinterfaceと型定義を追加
- tsconfig.json設定とビルド環境構築
- 型安全性確保とコンパイル時エラー検出

**残存事項**:
- ESLint警告（未使用変数、依存配列）のみ
- 機能に影響なし、段階的に解消予定

## UI/UX制限

### 1. レスポンシブ対応
**現状**: デスクトップ優先設計
**改善予定**: モバイル対応の強化

### 2. アクセシビリティ
**現状**: 基本的な対応のみ
**改善予定**: WAI-ARIA準拠、キーボードナビゲーション

## 機能制限

### 1. ゲーム難易度制限
**実装済み制限**:
- Phantasm難易度：妖々夢（第7作）のみ
- Extra難易度：獣王園（第19作）は対象外

**備考**: ゲーム固有の制限は今後も追加される可能性

### 2. 検索・フィルター機能
**現状**: 基本実装のみ（将来実装予定でコメントアウト）
**将来追加予定**:
- ゲームタイトル検索
- 難易度別フィルター
- クリア状況別フィルター

### 3. 管理者機能
**現状**: バックエンドAPIのみ実装
**未実装**: フロントエンド管理画面

## パフォーマンス

### 1. データベース
**現状**: SQLite（開発・小規模運用）
**スケール時**: PostgreSQL移行検討

### 2. 大量データ対応
**現状**: ページネーション未実装
**将来対応**: 無限スクロール or ページング

## セキュリティ考慮事項

### 1. 実装済み対策
- JWT認証
- bcryptパスワードハッシュ化
- CORS設定
- 入力値バリデーション

### 2. 将来強化予定
- CSRFトークン
- レート制限
- セッション管理強化

## 運用上の制約

### 1. ログ・監視
**実装済み** (2025年10月):
- 構造化ログ（バックエンド: JSON形式、フロントエンド: タイムスタンプ付き）
- 機密情報自動マスキング
- リクエストトレーシング（バックエンド）
- 環境別ログレベル制御

**将来実装予定**:
- メトリクス監視（Prometheus等）
- ログ集約システム（ELK Stack等）
- アラート機能

### 2. バックアップ
**現状**: 手動ファイルコピー
**改善予定**: 自動バックアップ機構

## 既知のバグ

### 1. TypeScript移行後のブラウザキャッシュ問題（軽微）
**問題**: TypeScript移行後、ブラウザが古いindex.jsを参照してエラーが発生する場合がある

**症状**: 
- "Module not found: Error: Can't resolve 'index.js'" エラー
- 新規ユーザーには影響なし

**解決方法**:
- ハードリフレッシュ（Cmd+Shift+R / Ctrl+Shift+R）
- シークレット/プライベートモードでアクセス
- ブラウザキャッシュクリア

**影響**: 軽微（開発者・既存ユーザーのみ）

## TODO: 今後の実装予定

### ロギング・エラーハンドリング
✅ **完了**: バックエンドのロギング機能実装（2025年10月15日）
- 構造化ログ（JSON形式）
- 機密情報自動マスキング
- リクエストトレーシング
- カスタム例外クラス
- グローバル例外ハンドラー
- 15個のテスト（全成功）

✅ **完了**: フロントエンドのロギング機能実装（2025年10月18日）
- 構造化ログ（タイムスタンプ・ログレベル・コンテキスト）
- 機密情報自動マスキング（パスワード・トークン・メールアドレス）
- 正規表現パターンマッチング（JWT・Bearer・APIキー）
- API専用ログメソッド（logApiCall/Success/Error）
- 環境変数によるログレベル制御
- 41個のテスト（全成功）

✅ **完了**: フロントエンドのエラーハンドリング強化（2025年10月18日）
- Error Boundary実装（コンポーネントエラーキャッチ・フォールバックUI）
- Toast通知システム（Context API・重大度別スタイリング・自動削除）
- エラーユーティリティ（APIエラーパース・HTTPマッピング・表示情報生成）
- 型定義（ErrorType・ErrorSeverity・AppError・ApiErrorResponse）
- ユーザーフレンドリーなエラーメッセージ表示
- 開発環境での詳細エラー情報表示
- 31個のテスト（errorHandler 17個・ErrorBoundary 5個・ToastContext 9個）

### テスト
🔲 **統合テスト**: API統合テスト・データベース連携テスト
🔲 **E2Eテスト**: エンドツーエンドのシナリオテスト

### CI/CD
🔲 **自動化パイプライン**: GitHub Actions設定、自動テスト・デプロイ

### セキュリティ
🔲 **レート制限**: API呼び出し頻度制限
🔲 **CSP設定**: Content Security Policy
🔲 **リフレッシュトークン**: HttpOnly Cookieでの実装

### パフォーマンス
🔲 **データベース最適化**: N+1問題の解消、インデックス見直し
🔲 **キャッシュ機構**: Redis等の導入

## 制限事項の優先順位

### 高優先
1. 管理者画面実装

### 中優先
3. 統合テスト実装
4. モバイル対応強化
5. 検索・フィルター機能
6. パフォーマンス最適化

### 低優先
7. CI/CD パイプライン構築
8. アクセシビリティ強化
9. 運用機能強化